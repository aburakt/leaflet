<!DOCTYPE html>
<html lang="en">
  <head>
    <base target="_top" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Leaflet Map Demo</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
      integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
      integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
      crossorigin=""
    ></script>

    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }
      .leaflet-container {
        height: 100%;
        width: 100%;
        max-width: 100%;
        max-height: 100%;
      }
      #hello {
        background-color: #f0f0f0;
        border-radius: 10%;
        padding: 0.5rem;
        width: 150px;
        text-align: center;
        display: none;
        left: var(--mouse-x);
        top: var(--mouse-y);
      }
    </style>
  </head>
  <body>
    <div id="map" style="width: 100%; height: 100%"></div>
    <div id="hello" style="width: auto; display: none">
      <h6 id="hi">Hello World</h6>
    </div>
    <script>
      // map settings
      const map = L.map('map').setView([38.2, 34.6], 0)

      const tiles = L.tileLayer(
        'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
        {
          maxZoom: 14,
          minZoom: 6,
          attribution:
            '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }
      ).addTo(map)

      let mClick = document.documentElement

      mClick.addEventListener('mouseup', (e) => {
        mClick.style.setProperty('--mouse-x', e.clientX + 'px')
        mClick.style.setProperty('--mouse-y', e.clientY + 'px')
      })

      // random markers
      function RandomMarker(number) {
        for (let i = 0; i < number; i++) {
          const lat = Math.floor(Math.random() * (4100 - 3700) + 3700) / 100
          const lon = Math.floor(Math.random() * (4300 - 2700) + 2700) / 100
          console.log('Boylam:', lat, '| Enlem:', lon)

          const marker = L.marker([lat, lon]).addTo(map)

          marker.on('click', function clickInfo() {
            if (hello.style.display === 'block') {
              hello.style.display = 'none'
            } else {
              hello.style.display = 'block'
              let hi = document.getElementById('hello')
              hi.innerHTML = `<b>Merhaba, burasÄ±</b><br />enlem: ${lat} - boylam: ${lon}`
              hi.classList.add(
                'leaflet-pane',
                'leaflet-popup-pane',
                'leaflet-popup',
                'leaflet-zoom-animated'
              )
            }
          })
        }
      }
      RandomMarker(25)

      //   const popup = L.popup()
      //     .setLatLng([38, 34])
      //     .setContent('I am a standalone popup.')
      //     .openOn(map)

      //   function onMapClick(e) {
      //     popup
      //       .setLatLng(e.latlng)
      //       .setContent(`You clicked the map at ${e.latlng.toString()}`)
      //       .openOn(map)
      //   }

      //   map.on('click', onMapClick)
    </script>
  </body>
</html>
